<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/knockout/3.3.0/knockout-min.js'></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript" src="http://wallplatecharger.com/wallplate.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">

var wpcGet ="http://wallplatecharger.com:8080/TomcatEight/Medications?";
var wpcGetNames = wpcGet + "namesofar=";
var wpcSetName  = wpcGet + "setname=";
var myUrl = "http://wallplatecharger.com/cgi-bin/";
var i = 1;
var counter = 1;

$(document).ready(function()
{
  renderNewAccount();		  
});

function  logOn(){
	////alert("values:" + $('#findinput3').val());
	
	$.ajax({

	    // The URL for the request
	    url: myUrl + "logon.cgi",
	 
	    // The data to send (will be converted to a query string)
	    data: {

	        password:  $('#addaccountinput2').val(),
	        email: $('#addaccountinput1').val()
	    },
	 
	    // Whether this is a POST or GET request
	    type: "POST",
	 
	    // The type of data we expect back
	    dataType : "json",
	 
	    // Code to run if the request succeeds;
	    // the response is passed to the function
	    success: function( json ) {
	     
	        
	        $("#logonresult").html(" Response Code:" + json.responsecode + " RecordId:" + json.uuid);
	        
	        if (json.responsecode == 1)
	        {
	        	
	        	
	        	renderDashboard(json.uuid);
	        	
	        	
	        }
	        
	        //alert( "request id" + json.id); 
	        
	        
	    },
	 
	    // Code to run if the request fails; the raw request and
	    // status codes are passed to the function
	    error: function( xhr, status, errorThrown ) {
	        //alert( "Sorry, there was a problem!" );
	        console.log( "Error: " + errorThrown );
	        console.log( "Status: " + status );
	        console.dir( xhr );
	    },
	 
	    // Code to run regardless of success or failure
	    complete: function( xhr, status ) {
	        //alert( "The request is complete!" );
	    }
	});

	};
	








function  addAccount(){
	////alert("values:" + $('#findinput3').val());
	
	$.ajax({

	    // The URL for the request
	    url: myUrl + "addaccount.cgi",
	 
	    // The data to send (will be converted to a query string)
	    data: {

	        password:  $('#addaccountinput2').val(),
	        email: $('#addaccountinput1').val()
	    },
	 
	    // Whether this is a POST or GET request
	    type: "POST",
	 
	    // The type of data we expect back
	    dataType : "json",
	 
	    // Code to run if the request succeeds;
	    // the response is passed to the function
	    success: function( json ) {
	     
	        
	        $("#addaccountresult").html(" Response Code:" + json.responsecode + " RecordId:" + json.id);
	        
	        if (json.responsecode == 1)
	        {
	        	
	        	
	        	renderLogOn();
	        	
	        	
	        }
	        
	        //alert( "request id" + json.id); 
	        
	        
	    },
	 
	    // Code to run if the request fails; the raw request and
	    // status codes are passed to the function
	    error: function( xhr, status, errorThrown ) {
	        //alert( "Sorry, there was a problem!" );
	        console.log( "Error: " + errorThrown );
	        console.log( "Status: " + status );
	        console.dir( xhr );
	    },
	 
	    // Code to run regardless of success or failure
	    complete: function( xhr, status ) {
	        //alert( "The request is complete!" );
	    }
	});

	};
	


function renderLogOn(){
	 
	  $('#BodyDiv').html("");
	
	  for (i = 0; i < 3; i++)
	  {
	    var newDashboardDiv = $(document.createElement('div')).attr("id", 'dashboarddiv' + i);

	    newDashboardDiv.after().html('<div id="dashboardlabeldiv' + i + '" style="float: left; width: 200px;">Textbox #'+ counter + ' : </div>' +
	    	    '<div style="float: left; width: 300px;" id="dashboardtextdiv' + i + '"> <input type="text" name="dashboardinput' + i + 
	    	    '" id="dashboardinput' + i + '" value="" ></div><div style="clear:left;"></div>');
	    // addNewAccountDiv.appendTo("#BodyDiv");
	    newDashboardDiv.appendTo("#BodyDiv");
	  }	 
	  
	 
	 
	  // modify the contents of the Add Device div set
	  $("#dashboardlabeldiv0").html("Log On to ImOkBox"); 
	  $("#dashboardtextdiv0").html("&nbsp;"); 
	  $("#dashboardlabeldiv1").text("eMail Address");
	  $("#dashboardlabeldiv2").text("Password");
	  

	//one div: ButtonDiv1
	  //contains one button
	  var buttonDiv = $(document.createElement('div')).attr("id", 'buttondiv1' );
	  buttonDiv.appendTo("#BodyDiv");
	   
	  var r= '<input type="button" id="addbutton1" value="Log On"/>';
	  
	  $("#buttondiv1").html(r);
	    
	  $( "#addbutton1" ).click(function() {
	   logOn();
	  });
	  
	  //Add Person Result
	  var newDashboardDiv = $(document.createElement('div')).attr("id", 'addaccountlabel' + i);

	  newDashboardDiv.after().html('<div id="dashboardlabeldiv' + "" + '" style="float: left; width: 200px;">Result</div>' +
	  '<div style="float: left; width: 200px;" id="dashboardresult' + "" + '"></div><div style="clear:left;"></div>');
	   
	  newDashboardDiv.appendTo("#BodyDiv");
	
}

function renderDashboard( uuid ){
	 
	  var first = "David";
	  $('#BodyDiv').html("");
	
	  for (i = 0; i < 15; i++)
	  {
	    var newDashboardDiv = $(document.createElement('div')).attr("id", 'dashboarddiv' + i);

	    newDashboardDiv.after().html('<div id="dashboardlabeldiv' + i + '" style="float: left; width: 200px;">Textbox #'+ counter + ' : </div>' +
	    	    '<div style="float: left; width: 300px;" id="dashboardtextdiv' + i + '"> <input type="text" name="dashboardinput' + i + 
	    	    '" id="dashboardinput' + i + '" value="" ></div><div style="clear:left;"></div>');
	    // addNewAccountDiv.appendTo("#BodyDiv");
	    newDashboardDiv.appendTo("#BodyDiv");
	  }	 
	  
	 
	 
	  // modify the contents of the Add Device div set
	  $("#dashboardlabeldiv0").html("ImOkBox Dashboard"); 
	  $("#dashboardtextdiv0").html("&nbsp;"); 
	  $("#dashboardtextdiv1").text(uuid); 
	  $("#dashboardlabeldiv1").text("UUID");
	  $("#dashboardlabeldiv2").text("First");
	  $("#dashboardlabeldiv3").text("Last");
	  $("#dashboardlabeldiv4").text("Device MAC");
	  
	  //button1
	  var r= '<input type="button" id="addbutton1" value="Update Record"/>';
	  $("#dashboardlabeldiv5").html(r);
	  $( "#addbutton1" ).click(function() {
	   updateAccount();
	  });
	  
	  //button2
	  r= '<input type="button" id="addbutton2" value="Add Message"/>';
	  $("#dashboardlabeldiv6").html(r);  
	  $( "#addbutton2" ).click(function() {
	   addSmsMessage();
	  });
	  
	  //button3
	  var buttonnum = 3;
	  r= '<input type="button" id="addbutton' + buttonnum +  '" value="Add SMS Number"/>';
	  $("#dashboardlabeldiv7").html(r);
	  $( "#addbutton" + buttonnum ).click(function() {
	   addSmsNumber();
	  });
	  
	  //select1
	  var selectnum = 1;
	  r = '<select id="select' + selectnum +'"></select>'
	  $("#dashboardlabeldiv8").html(r);
	  selectnum++;
	  r = '<select id="select' + selectnum +'"></select>' 
	  $("#dashboardlabeldiv8").append(r);
	  

	  $("#dashboardlabeldiv9").text("Test Message");
	  $("#dashboardlabeldiv10").text("Test Number");
	  
	  
	  //button4
	  var buttonnum = 4;
	  r= '<input type="button" id="addbutton' + buttonnum +  '" value="Send Test"/>';
	  $("#dashboardlabeldiv11").html(r);
	  $( "#addbutton" + buttonnum ).click(function() {
	   sendSms();
	  });
	  
	  
	  
	  
	  
	  
	  
	  
}

function renderNewAccount(){
	
	  for (i = 0; i < 3; i++)
	  {
	    var addNewAccountDiv = $(document.createElement('div')).attr("id", 'addNewAccountdiv' + i);

	    addNewAccountDiv.after().html('<div id="addaccountlabeldiv' + i + '" style="float: left; width: 200px;">Textbox #'+ counter + ' : </div>' +
	    	    '<div style="float: left; width: 200px;" id="addaccounttextdiv' + i + '"> <input type="text" name="inputbox' + i + 
	    	    '" id="addaccountinput' + i + '" value="" ></div><div style="clear:left;"></div>');
	    addNewAccountDiv.appendTo("#BodyDiv");
	  }	 
	  // modify the contents of the Add Device div set
	  $("#addaccountlabeldiv0").html("Create New Account"); 
	  $("#addaccounttextdiv0").html("&nbsp;"); 
	  $("#addaccountlabeldiv1").text("eMail Address");
	  $("#addaccountlabeldiv2").text("Password");
	  

	//one div: ButtonDiv1
	  //contains one button
	  var buttonDiv = $(document.createElement('div')).attr("id", 'buttondiv1' );
	  buttonDiv.appendTo("#BodyDiv");
	   
	  var r= '<input type="button" id="addbutton1" value="Create Account"/>';
	  
	  $("#buttondiv1").html(r);
	    
	  $( "#addbutton1" ).click(function() {
	   addAccount();
	  });
	  
	  //Add Person Result
	  var addNewAccountDiv = $(document.createElement('div')).attr("id", 'addaccountlabel' + i);

	  addNewAccountDiv.after().html('<div id="addaccountlabel' + "" + '" style="float: left; width: 200px;">Result</div>' +
	  '<div style="float: left; width: 200px;" id="addaccountresult' + "" + '"></div><div style="clear:left;"></div>');
	   
	  addNewAccountDiv.appendTo("#BodyDiv");



};		
</script>

<title>New ImOkBox Account</title>
</head>
<body>
<div id="BodyDiv">




</div>
</body>
</html>