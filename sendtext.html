<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Send Text</title>
<script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/knockout/3.3.0/knockout-min.js'></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">

var wpcGet ="http://wallplatecharger.com:8080/TomcatEight/Medications?";
var wpcGetNames = wpcGet + "namesofar=";
var wpcSetName  = wpcGet + "setname=";
var myUrl = "http://wallplatecharger.com/cgi-bin/";
var counter = 1;


$(document).ready(function()
{
  
  //Add Person	
  //four divs: addpersondiv + i
  //addpersondive contains two child divs which float: left;
  //child div: addpersonlabeldiv + i
  //child div: addpersontextdiv + i
  //input:     addpersoninput + i
  for (i = 0; i < 4; i++)
  {
    var addPersonDiv = $(document.createElement('div')).attr("id", 'addpersondiv' + i);

    addPersonDiv.after().html('<div id="addpersonlabeldiv' + i + '" style="float: left; width: 200px;">Textbox #'+ counter + ' : </div>' +
    '<div style="float: left; width: 200px;" id="addpersontextdiv' + i + '"> <input type="text" name="textbox' + i + 
    '" id="addpersoninput' + i + '" value="" ></div><div style="clear:left;"></div>');
  
    addPersonDiv.appendTo("#BodyDiv");
  }
 
  $("#addpersonlabeldiv0").html("Add Person Input"); 
  $("#addpersontextdiv0").html("&nbsp;"); 
  $("#addpersonlabeldiv1").text("First Name");
  $("#addpersonlabeldiv2").text("Last Name");
  $("#addpersonlabeldiv3").text("Email");
   
  //one div: ButtonDiv1
  //contains one button
  var buttonDiv = $(document.createElement('div')).attr("id", 'buttondiv1' );
  buttonDiv.appendTo("#BodyDiv");
   
  var r= '<input type="button" id="addbutton1" value="Add"/>';
  
  $("#buttondiv1").html(r);
    
  $( "#addbutton1" ).click(function() {
   addPerson();
  });
  
  //Add Person Result
  var addPersonResultDiv = $(document.createElement('div')).attr("id", 'addpersonresultdiv' + i);

  addPersonResultDiv.after().html('<div id="addpersonresultlabel' + "" + '" style="float: left; width: 200px;">Add Person Result</div>' +
  '<div style="float: left; width: 200px;" id="addpersonresult' + "" + '"></div><div style="clear:left;"></div>');
   
  addPersonResultDiv.appendTo("#BodyDiv");
  
  //one div: horrule1
  //contains <HR>
  var horizontalRuleDiv = $(document.createElement('div')).attr("id", 'horrule1' );
  horizontalRuleDiv.appendTo("#BodyDiv");
  var rule= '<hr>';
  $("#horrule1").html(rule);
  
  //Find Person
  //four divs: addpersosondiv + i
  //addpersondive contains two child divs which float: left;
  //child div: addpersonlabeldiv + i
  //child div: addpersontextdiv + i
  //input:     addpersoninput + i
  for (i = 0; i < 4; i++)
  {
    var findPersonDiv = $(document.createElement('div')).attr("id", 'findpersondiv' + i);

    findPersonDiv.after().html('<div id="findpersonlabeldiv' + i + '" style="float: left; width: 200px;">Textbox #'+ counter + ' : </div>' +
    '<div style="float: left; width: 200px;" id="findpersontextdiv' + i + '"> <input type="text" name="textbox' + i + 
    '" id="findpersoninput' + i + '" value="" ></div><div style="clear:left;"></div>');
  
    findPersonDiv.appendTo("#BodyDiv");
  }
 
  $("#findpersonlabeldiv0").html("Find Person Input"); 
  $("#findpersontextdiv0").html("&nbsp;"); 
  $("#findpersonlabeldiv1").text("First Name");
  $("#findpersonlabeldiv2").text("Last Name");
  $("#findpersonlabeldiv3").text("Email");
   
  //one div: ButtonDiv1
  //contains one button
  var findButtonDiv = $(document.createElement('div')).attr("id", 'findbuttondiv1' );
  findButtonDiv.appendTo("#BodyDiv");
   
  var r= '<input type="button" id="findbutton1" value="Find"/>';
  
  $("#findbuttondiv1").html(r);
    
  $( "#findbutton1" ).click(function() {
   findPerson();
  });
  
  //Find Person Result
  var findPersonResultDiv = $(document.createElement('div')).attr("id", 'findpersonresultdiv' + i);

  findPersonResultDiv.after().html('<div id="findpersonresultlabel' + "" + '" style="float: left; width: 200px;">Find Person Result</div>' +
  '<div style="float: left; width: 200px;" id="findpersonresult' + "" + '"></div><div style="clear:left;"></div>');
   
  findPersonResultDiv.appendTo("#BodyDiv");
  
  //one div: horrule2
  //contains one <hr>
  horizontalRuleDiv = $(document.createElement('div')).attr("id", 'horrule2' );
  horizontalRuleDiv.appendTo("#BodyDiv");
  $("#horrule2").html(rule);


  //Find Person
  //four divs: finepersosondiv + i
  //findpersondiv  contains two child divs which float: left;
  //child div: addpersonlabeldiv + i
  //child div: addpersontextdiv + i
  //input:     addpersoninput + i
  
  for (i = 1; i < 5; i++)
  {
    var findPersonDiv = $(document.createElement('div')).attr("id", 'findpersondiv' + i);

    findPersonDiv.after().html('<div id="findpersonlabel' + i + '" style="float: left; width: 200px;"></div>' +
    '<div style="float: left; width: 200px;" id="addbuttonresult' + i + '"></div><div style="clear:left;"></div>');
   
    findPersonDiv.appendTo("#BodyDiv");
  }
 
   
   var newDiv = $(document.createElement('div')).attr("id", 'ButtonDiv1' );
   newDiv.appendTo("#BodyDiv");
   
   var r= '<input type="button" id="Button2" value="Add"/>';
   $("#ButtonDiv1").append(r);
   
   
   $( "#Button2" ).click(function() {
     myFunc();
   });
 
   for (i = 0; i < 1; i++)
   {
   var newTextBoxDiv = $(document.createElement('div')).attr("id", 'TextBoxDiv' + counter);

   newTextBoxDiv.after().html('<label id="label' + i + '">Textbox #'+ counter + ' : </label>' +
    '<input type="text" name="textbox' + i + 
    '" id="textbox' + i + '" value="" >');
   
   newTextBoxDiv.appendTo("#BodyDiv");
   }
   
   
   for (i = 0; i < 5; i++)
   {
   var newTextBoxDiv = $(document.createElement('div')).attr("id", 'TextBoxDiv' + i);

   newTextBoxDiv.after().html('<div id="finddiv' + i + '" style="float: left; width: 200px;">&nbsp;</div>' +
    '<div style="float: left; width: 200px;">&nbsp;</div><div style="clear:left;"></div>');
   
   newTextBoxDiv.appendTo("#BodyDiv");
   }
   
   $("#finddiv0").html("&nbsp;"); 
   $("#finddiv1").text("Record Id");
   $("#finddiv2").text("First");
   $("#finddiv3").text("Last");
   $("#finddiv4").text("Email");
});




function  addPerson(){
	////alert("values:" + $('#findinput3').val());
	
	$.ajax({

	    // The URL for the request
	    url: myUrl + "addperson.cgi",
	 
	    // The data to send (will be converted to a query string)
	    data: {
	        first: $('#addpersoninput1').val(),
	        last:  $('#addpersoninput2').val(),
	        email: $('#addpersoninput3').val()
	    },
	 
	    // Whether this is a POST or GET request
	    type: "POST",
	 
	    // The type of data we expect back
	    dataType : "json",
	 
	    // Code to run if the request succeeds;
	    // the response is passed to the function
	    success: function( json ) {
	        $( "<h1>" ).text( json.title ).appendTo( "body" );
	        $( "<div class=\"content\">").html( json.html ).appendTo( "body" );
	        
	        $("#addpersonresult").html(" ResultCode:" + json.responsecode + " RecordId:" + json.id);
	        //alert( "request id" + json.id); 
	        
	        
	    },
	 
	    // Code to run if the request fails; the raw request and
	    // status codes are passed to the function
	    error: function( xhr, status, errorThrown ) {
	        //alert( "Sorry, there was a problem!" );
	        console.log( "Error: " + errorThrown );
	        console.log( "Status: " + status );
	        console.dir( xhr );
	    },
	 
	    // Code to run regardless of success or failure
	    complete: function( xhr, status ) {
	        //alert( "The request is complete!" );
	    }
	});

	};
	
	
	function  findPerson(){
		//alert("values:" + $('#findinput3').val());
		
		$.ajax({

		    // The URL for the request
		    url: myUrl + "findperson.cgi",
		 
		    // The data to send (will be converted to a query string)
		    data: {
		        first: $('#findpersoninput1').val(),
		        last:  $('#findpersoninput2').val(),
		        email: $('#findpersoninput3').val()
		    },
		 
		    // Whether this is a POST or GET request
		    type: "POST",
		 
		    // The type of data we expect back
		    dataType : "json",
		 
		    // Code to run if the request succeeds;
		    // the response is passed to the function
		    success: function( json ) {
		        $( "<h1>" ).text( json.title ).appendTo( "body" );
		        $( "<div class=\"content\">").html( json.html ).appendTo( "body" );
		        
		        $("#findpersonresult").html(" ResultCode:" + json.responsecode + " RecordId:" + json.id);
		        //alert( "request id" + json.id); 
		        
		        
		    },
		 
		    // Code to run if the request fails; the raw request and
		    // status codes are passed to the function
		    error: function( xhr, status, errorThrown ) {
		        //alert( "Sorry, there was a problem!" );
		        console.log( "Error: " + errorThrown );
		        console.log( "Status: " + status );
		        console.dir( xhr );
		    },
		 
		    // Code to run regardless of success or failure
		    complete: function( xhr, status ) {
		        //alert( "The request is complete!" );
		    }
		});

		};
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	

function  myFunc(){

$.ajax({
	 
    // The URL for the request
    url: myUrl,
 
    // The data to send (will be converted to a query string)
    data: {
        fname: 'david'
    },
 
    // Whether this is a POST or GET request
    type: "GET",
 
    // The type of data we expect back
    dataType : "json",
 
    // Code to run if the request succeeds;
    // the response is passed to the function
    success: function( json ) {
        $( "<h1>" ).text( json.title ).appendTo( "body" );
        $( "<div class=\"content\">").html( json.html ).appendTo( "body" );
    },
 
    // Code to run if the request fails; the raw request and
    // status codes are passed to the function
    error: function( xhr, status, errorThrown ) {
        //alert( "Sorry, there was a problem!" );
        console.log( "Error: " + errorThrown );
        console.log( "Status: " + status );
        console.dir( xhr );
    },
 
    // Code to run regardless of success or failure
    complete: function( xhr, status ) {
        //alert( "The request is complete!" );
    }
});

};

self.setName = function(allData) {
  	var myVal = $("#three").val();
        $.getJSON(wpcSetName + myVal, function(allData) {
         var mappedTasks = $.map(allData, function(item) { return new Task(item) });
         self.tasks(mappedTasks);
         $("#one").html("Receive");
       //  $("#two").html(this.ajaxParam1());
          });
        $("#one").html("Send");
    };
    
    self.newJSON = function(allData) {
       	var myVal = $("#three").val();
        $.getJSON(wpcGetNames + myVal, function(allData) {
         var mappedTasks = $.map(allData, function(item) { return new Task(item) });
         self.tasks(mappedTasks);
         $("#one").html("Receive");
       //  $("#two").html(this.ajaxParam1());
          });
        $("#one").html("Sent Name");
    };
</script>
</head>
<body>
<div id="BodyDiv">

</div>
</body>
</html>