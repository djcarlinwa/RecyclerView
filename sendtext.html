<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Send Text</title>
<script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/knockout/3.3.0/knockout-min.js'></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">

var wpcGet ="http://wallplatecharger.com:8080/TomcatEight/Medications?";
var wpcGetNames = wpcGet + "namesofar=";
var wpcSetName  = wpcGet + "setname=";
var myUrl = "http://wallplatecharger.com/cgi-bin/";
var counter = 1;


$(document).ready(function()
{
  
  //Add Person	
  //four divs: addpersondiv + i
  //addpersondive contains two child divs which float: left;
  //child div: addpersonlabeldiv + i
  //child div: addpersontextdiv + i
  //input:     addpersoninput + i
  for (i = 0; i < 4; i++)
  {
    var addPersonDiv = $(document.createElement('div')).attr("id", 'addpersondiv' + i);

    addPersonDiv.after().html('<div id="addpersonlabeldiv' + i + '" style="float: left; width: 200px;">Textbox #'+ counter + ' : </div>' +
    '<div style="float: left; width: 200px;" id="addpersontextdiv' + i + '"> <input type="text" name="textbox' + i + 
    '" id="addpersoninput' + i + '" value="" ></div><div style="clear:left;"></div>');
  
    addPersonDiv.appendTo("#BodyDiv");
  }
 
  $("#addpersonlabeldiv0").html("Add Person"); 
  $("#addpersontextdiv0").html("&nbsp;"); 
  $("#addpersonlabeldiv1").text("First Name");
  $("#addpersonlabeldiv2").text("Last Name");
  $("#addpersonlabeldiv3").text("Email");
   
  //one div: ButtonDiv1
  //contains one button
  var buttonDiv = $(document.createElement('div')).attr("id", 'buttondiv1' );
  buttonDiv.appendTo("#BodyDiv");
   
  var r= '<input type="button" id="addbutton1" value="Add Person"/>';
  
  $("#buttondiv1").html(r);
    
  $( "#addbutton1" ).click(function() {
   addPerson();
  });
  
  //Add Person Result
  var addPersonResultDiv = $(document.createElement('div')).attr("id", 'addpersonresultdiv' + i);

  addPersonResultDiv.after().html('<div id="addpersonresultlabel' + "" + '" style="float: left; width: 200px;">Result</div>' +
  '<div style="float: left; width: 200px;" id="addpersonresult' + "" + '"></div><div style="clear:left;"></div>');
   
  addPersonResultDiv.appendTo("#BodyDiv");
  
  //one div: horrule1
  //contains <HR>
  var horizontalRuleDiv = $(document.createElement('div')).attr("id", 'horrule1' );
  horizontalRuleDiv.appendTo("#BodyDiv");
  var rule= '<hr>';
  $("#horrule1").html(rule);
  
  //Find Person
  //four divs: addpersosondiv + i
  //addpersondive contains two child divs which float: left;
  //child div: addpersonlabeldiv + i
  //child div: addpersontextdiv + i
  //input:     addpersoninput + i
  for (i = 0; i < 4; i++)
  {
    var findPersonDiv = $(document.createElement('div')).attr("id", 'findpersondiv' + i);

    findPersonDiv.after().html('<div id="findpersonlabeldiv' + i + '" style="float: left; width: 200px;">Textbox #'+ counter + ' : </div>' +
    '<div style="float: left; width: 200px;" id="findpersontextdiv' + i + '"> <input type="text" name="textbox' + i + 
    '" id="findpersoninput' + i + '" value="" ></div><div style="clear:left;"></div>');
  
    findPersonDiv.appendTo("#BodyDiv");
  }
 
  $("#findpersonlabeldiv0").html("Find Person"); 
  $("#findpersontextdiv0").html("&nbsp;"); 
  $("#findpersonlabeldiv1").text("First Name");
  $("#findpersonlabeldiv2").text("Last Name");
  $("#findpersonlabeldiv3").text("Email");
   
  //one div: ButtonDiv1
  //contains one button
  var findButtonDiv = $(document.createElement('div')).attr("id", 'findbuttondiv1' );
  findButtonDiv.appendTo("#BodyDiv");
   
  var r= '<input type="button" id="findbutton1" value="Find Person"/>';
  
  $("#findbuttondiv1").html(r);
    
  $( "#findbutton1" ).click(function() {
   findPerson();
  });
  
  //Find Person Result
  var findPersonResultDiv = $(document.createElement('div')).attr("id", 'findpersonresultdiv' + i);

  findPersonResultDiv.after().html('<div id="findpersonresultlabel' + "" + '" style="float: left; width: 200px;">Result</div>' +
  '<div style="float: left; width: 200px;" id="findpersonresult' + "" + '"></div><div style="clear:left;"></div>');
   
  findPersonResultDiv.appendTo("#BodyDiv");
  
  //one div: horrule2
  //contains one <hr>
  horizontalRuleDiv = $(document.createElement('div')).attr("id", 'horrule2' );
  horizontalRuleDiv.appendTo("#BodyDiv");
  $("#horrule2").html(rule);


  //Add Device
  //two divs: adddevicediv + i
  //adddevicediv  contains two child divs which float: left;
  //child div: adddevicelabeldiv + i
  //child div: adddevicetextdiv + i
  //input:     adddeviceinput + i
  
  for (i = 0; i < 3; i++)
  {
    var addDeviceDiv = $(document.createElement('div')).attr("id", 'adddevicediv' + i);

    addDeviceDiv.after().html('<div id="adddevicelabeldiv' + i + '" style="float: left; width: 200px;">Textbox #'+ counter + ' : </div>' +
    	    '<div style="float: left; width: 200px;" id="adddevicetextdiv' + i + '"> <input type="text" name="textbox' + i + 
    	    '" id="adddeviceinput' + i + '" value="" ></div><div style="clear:left;"></div>');
   
    addDeviceDiv.appendTo("#BodyDiv");
  }
 
  // modify the contents of the Add Device div set
  $("#adddevicelabeldiv0").html("Add Device"); 
  $("#adddevicetextdiv0").html("&nbsp;"); 
  $("#adddevicelabeldiv1").text("Device MAC");
  $("#adddevicelabeldiv2").text("Device Type");
  $("#adddevicetextdiv2").html('<select id="adddeviceselector"</select>');
  
  //populate the drop down
  findDeviceType();	  

  //one div: adddevicebuttondiv1
  //contains one button
  var addDeviceButtonDiv = $(document.createElement('div')).attr("id", 'adddevicebuttondiv1' );
  addDeviceButtonDiv.appendTo("#BodyDiv");
   
  var r= '<input type="button" id="adddevicebutton1" value="Add Device"/>';
  
  $("#adddevicebuttondiv1").html(r);
    
  $( "#adddevicebutton1" ).click(function() {
   addDevice();
  });
  
  //Find Device Result
  var addDeviceResultDiv = $(document.createElement('div')).attr("id", 'adddeviceresultdiv' + i);

  addDeviceResultDiv.after().html('<div id="adddeviceresultlabel' + "" + '" style="float: left; width: 200px;">Result</div>' +
  '<div style="float: left; width: 200px;" id="adddeviceresult' + "" + '"></div><div style="clear:left;"></div>');
   
  addDeviceResultDiv.appendTo("#BodyDiv");
  
  //one div: horrule3
  //contains one <hr>
  horizontalRuleDiv = $(document.createElement('div')).attr("id", 'horrule3' );
  horizontalRuleDiv.appendTo("#BodyDiv");
  $("#horrule3").html(rule);
  
  
  //Find Device
  //two divs: finddevicediv + i
  //finddevicediv  contains two child divs which float: left;
  //child div: finddevicelabeldiv + i
  //child div: finddevicetextdiv + i
  //input:     finddeviceinput + i
  
  for (i = 0; i < 3; i++)
  {
    var findDeviceDiv = $(document.createElement('div')).attr("id", 'finddevicediv' + i);

    findDeviceDiv.after().html('<div id="finddevicelabeldiv' + i + '" style="float: left; width: 200px;">Textbox #'+ counter + ' : </div>' +
    	    '<div style="float: left; width: 200px;" id="finddevicetextdiv' + i + '"> <input type="text" name="finddevice' + i + 
    	    '" id="finddeviceinput' + i + '" value="" ></div><div style="clear:left;"></div>');
   
    findDeviceDiv.appendTo("#BodyDiv");
  }
 
  
  $("#finddevicelabeldiv0").html("Find Device"); 
  $("#finddevicetextdiv0").html("&nbsp;"); 
  $("#finddevicelabeldiv1").text("MAC");
  $("#finddevicelabeldiv2").text("Type");
  
  //one div: finddevicebuttondiv1
  //contains one button
  var findDeviceButtonDiv = $(document.createElement('div')).attr("id", 'finddevicebuttondiv1' );
  findDeviceButtonDiv.appendTo("#BodyDiv");
   
  var r= '<input type="button" id="finddevicebutton1" value="Find Device"/>';
  
  $("#finddevicebuttondiv1").html(r);
    
  $( "#finddevicebutton1" ).click(function() {
   findDevice();
  });
  
  //Find Device Result
  var findDeviceResultDiv = $(document.createElement('div')).attr("id", 'finddeviceresultdiv' + i);

  findDeviceResultDiv.after().html('<div id="finddeviceresultlabel' + "" + '" style="float: left; width: 200px;">Find Device Result</div>' +
  '<div style="float: left; width: 200px;" id="finddeviceresult' + "" + '"></div><div style="clear:left;"></div>');
   
  findDeviceResultDiv.appendTo("#BodyDiv");
  
  //one div: horrule4
  //contains one <hr>
  horizontalRuleDiv = $(document.createElement('div')).attr("id", 'horrule4' );
  horizontalRuleDiv.appendTo("#BodyDiv");
  $("#horrule3").html(rule);
  
  
  
  
  
  
  
  
  
  
  
  
   
   var newDiv = $(document.createElement('div')).attr("id", 'finddevicebuttondiv' );
   newDiv.appendTo("#BodyDiv");
   
   var r= '<input type="button" id="Button3" value="Find"/>';
   $("#ButtonDiv1").append(r);
   
   
   $( "#Button3" ).click(function() {
     findDevice();
   });
 
   for (i = 0; i < 1; i++)
   {
   var newFindDeviceDiv = $(document.createElement('div')).attr("id", 'finddevicetextbox' + counter);

   newFindDeviceDiv.after().html('<label id="label' + i + '">Textbox #'+ counter + ' : </label>' +
    '<input type="text" name="textbox' + i + 
    '" id="textbox' + i + '" value="" >');
   
   newFindDeviceDiv.appendTo("#BodyDiv");
   }
   
   
   for (i = 0; i < 5; i++)
   {
   var newTextBoxDiv = $(document.createElement('div')).attr("id", 'TextBoxDiv' + i);

   newTextBoxDiv.after().html('<div id="finddiv' + i + '" style="float: left; width: 200px;">&nbsp;</div>' +
    '<div style="float: left; width: 200px;">&nbsp;</div><div style="clear:left;"></div>');
   
   newTextBoxDiv.appendTo("#BodyDiv");
   }
   
   $("#finddiv0").html("&nbsp;"); 
   $("#finddiv1").text("Record Id");
   $("#finddiv2").text("First");
   $("#finddiv3").text("Last");
   $("#finddiv4").text("Email");
});




function  addDevice(){
	////alert("values:" + $('#findinput3').val());
	
	$.ajax({

	    // The URL for the request
	    url: myUrl + "adddevice.cgi",
	 
	    // The data to send (will be converted to a query string)
	    data: {
	        mac:    $('#adddeviceinput1').val(),
	        typeid: $("#adddeviceselector option:selected").text()

	    },
	 
	    // Whether this is a POST or GET request
	    type: "POST",
	 
	    // The type of data we expect back
	    dataType : "json",
	 
	    // Code to run if the request succeeds;
	    // the response is passed to the function
	    success: function( json ) {
	        $( "<h1>" ).text( json.title ).appendTo( "body" );
	        $( "<div class=\"content\">").html( json.html ).appendTo( "body" );
	        
	        $("#adddeviceresult").html(" Response Code:" + json.responsecode + " RecordId:" + json.id);
	        //alert( "request id" + json.id); 
	        
	        
	    },
	 
	    // Code to run if the request fails; the raw request and
	    // status codes are passed to the function
	    error: function( xhr, status, errorThrown ) {
	        //alert( "Sorry, there was a problem!" );
	        console.log( "Error: " + errorThrown );
	        console.log( "Status: " + status );
	        console.dir( xhr );
	    },
	 
	    // Code to run regardless of success or failure
	    complete: function( xhr, status ) {
	        //alert( "The request is complete!" );
	    }
	});

	};





function  addPerson(){
	////alert("values:" + $('#findinput3').val());
	
	$.ajax({

	    // The URL for the request
	    url: myUrl + "addperson.cgi",
	 
	    // The data to send (will be converted to a query string)
	    data: {
	        first: $('#addpersoninput1').val(),
	        last:  $('#addpersoninput2').val(),
	        email: $('#addpersoninput3').val()
	    },
	 
	    // Whether this is a POST or GET request
	    type: "POST",
	 
	    // The type of data we expect back
	    dataType : "json",
	 
	    // Code to run if the request succeeds;
	    // the response is passed to the function
	    success: function( json ) {
	        $( "<h1>" ).text( json.title ).appendTo( "body" );
	        $( "<div class=\"content\">").html( json.html ).appendTo( "body" );
	        
	        $("#addpersonresult").html(" Response Code:" + json.responsecode + " RecordId:" + json.id);
	        //alert( "request id" + json.id); 
	        
	        
	    },
	 
	    // Code to run if the request fails; the raw request and
	    // status codes are passed to the function
	    error: function( xhr, status, errorThrown ) {
	        //alert( "Sorry, there was a problem!" );
	        console.log( "Error: " + errorThrown );
	        console.log( "Status: " + status );
	        console.dir( xhr );
	    },
	 
	    // Code to run regardless of success or failure
	    complete: function( xhr, status ) {
	        //alert( "The request is complete!" );
	    }
	});

	};
	
	
	function  findPerson(){
		//alert("values:" + $('#findinput3').val());
		
		$.ajax({

		    // The URL for the request
		    url: myUrl + "findperson.cgi",
		 
		    // The data to send (will be converted to a query string)
		    data: {
		        first: $('#findpersoninput1').val(),
		        last:  $('#findpersoninput2').val(),
		        email: $('#findpersoninput3').val()
		    },
		 
		    // Whether this is a POST or GET request
		    type: "POST",
		 
		    // The type of data we expect back
		    dataType : "json",
		 
		    // Code to run if the request succeeds;
		    // the response is passed to the function
		    success: function( json ) {
		        $( "<h1>" ).text( json.title ).appendTo( "body" );
		        $( "<div class=\"content\">").html( json.html ).appendTo( "body" );
		        
		        $("#findpersonresult").html(" Response Code:" + json.responsecode + " RecordId:" + json.id);
		        //alert( "request id" + json.id); 
		        
		        
		    },
		 
		    // Code to run if the request fails; the raw request and
		    // status codes are passed to the function
		    error: function( xhr, status, errorThrown ) {
		        //alert( "Sorry, there was a problem!" );
		        console.log( "Error: " + errorThrown );
		        console.log( "Status: " + status );
		        console.dir( xhr );
		    },
		 
		    // Code to run regardless of success or failure
		    complete: function( xhr, status ) {
		        //alert( "The request is complete!" );
		    }
		});

		};
	
		function  findDevice(){
			//alert("values:" + $('#findinput3').val());
			
			$.ajax({

			    // The URL for the request
			    url: myUrl + "finddevice.cgi",
			 
			    // The data to send (will be converted to a query string)
			    data: {
			          mac: $('#finddeviceinput1').val(),
			       // last:  $('#findpersoninput2').val(),
			       // email: $('#findpersoninput3').val()
			    },
			 
			    // Whether this is a POST or GET request
			    type: "POST",
			 
			    // The type of data we expect back
			    dataType : "json",
			 
			    // Code to run if the request succeeds;
			    // the response is passed to the function
			    success: function( json ) {    
			        $("#finddeviceresult").html(" Response Code:" + json.responsecode + " RecordId:" + json.id);
			        $("#finddevicetextdiv2").text(json.devicetypetext);
			    },
			 
			    // Code to run if the request fails; the raw request and
			    // status codes are passed to the function
			    error: function( xhr, status, errorThrown ) {
			        //alert( "Sorry, there was a problem!" );
			        console.log( "Error: " + errorThrown );
			        console.log( "Status: " + status );
			        console.dir( xhr );
			    },
			 
			    // Code to run regardless of success or failure
			    complete: function( xhr, status ) {
			        //alert( "The request is complete!" );
			    }
			});

			};
			
	
	
	
	
			function  findDeviceType(){
				//alert("values:" + $('#findinput3').val());
				
				$.ajax({

				    // The URL for the request
				    url: myUrl + "devicetypelookup.cgi",
				 
				    // The data to send (will be converted to a query string)
				    data: {
				       // first: $('#findpersoninput1').val(),
				       // last:  $('#findpersoninput2').val(),
				       // email: $('#findpersoninput3').val()
				    },
				 
				    // Whether this is a POST or GET request
				    type: "GET",
				 
				    // The type of data we expect back
				    dataType : "json",
				 
				    // Code to run if the request succeeds;
				    // the response is passed to the function
				    success: function( json ) {

				    	//alert("Hello" + json.toString());
				    	
				    	var _select = $('<select>');
						$.each(json, function(index, val) {
						    _select.append(
						            $('<option></option>').val(val.recordid).html(val.recordtext)
						        );
						});
					
				  
						  $("#adddeviceselector").append(_select.html());
				        
				        
				    },
				 
				    // Code to run if the request fails; the raw request and
				    // status codes are passed to the function
				    error: function( xhr, status, errorThrown ) {
				        //alert( "Sorry, there was a problem!" );
				        console.log( "Error: " + errorThrown );
				        console.log( "Status: " + status );
				        console.dir( xhr );
				    },
				 
				    // Code to run regardless of success or failure
				    complete: function( xhr, status ) {
				        //alert( "The request is complete!" );
				    }
				});

				};
	
	
	
	
	
	
	
	
	
	
	

function  myFunc(){

$.ajax({
	 
    // The URL for the request
    url: myUrl,
 
    // The data to send (will be converted to a query string)
    data: {
        fname: 'david'
    },
 
    // Whether this is a POST or GET request
    type: "GET",
 
    // The type of data we expect back
    dataType : "json",
 
    // Code to run if the request succeeds;
    // the response is passed to the function
    success: function( json ) {
        $( "<h1>" ).text( json.title ).appendTo( "body" );
        $( "<div class=\"content\">").html( json.html ).appendTo( "body" );
    },
 
    // Code to run if the request fails; the raw request and
    // status codes are passed to the function
    error: function( xhr, status, errorThrown ) {
        //alert( "Sorry, there was a problem!" );
        console.log( "Error: " + errorThrown );
        console.log( "Status: " + status );
        console.dir( xhr );
    },
 
    // Code to run regardless of success or failure
    complete: function( xhr, status ) {
        //alert( "The request is complete!" );
    }
});

};

self.setName = function(allData) {
  	var myVal = $("#three").val();
        $.getJSON(wpcSetName + myVal, function(allData) {
         var mappedTasks = $.map(allData, function(item) { return new Task(item) });
         self.tasks(mappedTasks);
         $("#one").html("Receive");
       //  $("#two").html(this.ajaxParam1());
          });
        $("#one").html("Send");
    };
    
    self.newJSON = function(allData) {
       	var myVal = $("#three").val();
        $.getJSON(wpcGetNames + myVal, function(allData) {
         var mappedTasks = $.map(allData, function(item) { return new Task(item) });
         self.tasks(mappedTasks);
         $("#one").html("Receive");
       //  $("#two").html(this.ajaxParam1());
          });
        $("#one").html("Sent Name");
    };
</script>
</head>
<body>
<div id="BodyDiv">

</div>
</body>
</html>